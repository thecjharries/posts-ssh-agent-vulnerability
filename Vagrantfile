# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.configure("2") do |config|
  config.vm.box = "fedora/27-cloud-base"

  config.vm.provision "shell" do |shell|
    shell.privileged = true
    shell.inline = <<-SHELL
    sed -i \
        -e 's/PermitRootLogin/#PermitRootLogin/g' \
        -e 's/#MaxAuthTries 6/MaxAuthTries 3/g' \
        -e 's/PasswordAuthentication yes/PasswordAuthentication no/g' \
        /etc/ssh/sshd_config
    systemctl restart sshd
    SHELL
  end

  config.vm.network "private_network", type: "dhcp"
end
